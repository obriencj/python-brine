<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Module brine &mdash; brine 0.9.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="brine 0.9.0 documentation" href="../" />
    <link rel="next" title="Module brine.barrel" href="../barrel/" />
    <link rel="prev" title="Overview of python-brine" href="../overview/" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../barrel/" title="Module brine.barrel"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../overview/" title="Overview of python-brine"
             accesskey="P">previous</a> |</li>
        <li><a href="../">brine 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-brine">
<h1>Module brine<a class="headerlink" href="#module-brine" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-brine"></span><p>Brine provides a way to wrap function objects so that they may be
pickled.</p>
<p>To truly pickle a function we need to be able to duplicate its code
and its closures. By default, <cite>pickle</cite> will simply store the
function&#8217;s name, and then attempt to associate that with a function
when unpickling. This of course fails when the function is a lambda or
not otherwise defined at the top level.</p>
<p>In order to mark a function, method, or partial for storage, use the
<cite>brine</cite> function to create a wrapper. Later, after pickling and
unpickling the wrapper, call <cite>unbrine</cite> to get a new copy of the
original function.</p>
<p>Loading this module has the side effect of registering a pickle
handler for the <cite>CellType</cite> type. This should be of low impact, as the
only place this type is used is within function instances, and it
typically unexposed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">author:</th><td class="field-body">Christopher O&#8217;Brien  &lt;<a class="reference external" href="mailto:obriencj&#37;&#52;&#48;gmail&#46;com">obriencj<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body">LGPL v.3</td>
</tr>
</tbody>
</table>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="brine.brine">
<tt class="descclassname">brine.</tt><tt class="descname">brine</tt><big>(</big><em>value</em><big>)</big><a class="reference internal" href="../_modules/brine/#brine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.brine" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap an object so that it may be pickled. Behavior by type of
<cite>value</cite> is as follows:</p>
<ul class="simple">
<li><cite>builtin_function_or_method</cite> is unchanged</li>
<li><cite>partial</cite> is wrapped as a <cite>BrinePartial</cite></li>
<li><cite>instancemethod</cite> is wrapped as a <cite>BrineMethod</cite></li>
<li><cite>function</cite> is wrapped as a <cite>BrineFunction</cite></li>
<li><cite>list</cite> and <cite>tuple</cite> are duplicated and contents are brined</li>
<li><cite>dict</cite> is duplicated and its values are brined</li>
<li>all other types are returned unchanged</li>
</ul>
<p>This function provides neither caching nor preservation of
uniqueness &#8211; if the same function is in a list multiple times,
each will be wrapped individually and as a result will be
duplicated when unbrined.</p>
<p>In cases where uniqueness needs to be preserved, use a <cite>Barrel</cite>
instead.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>value</strong> : <cite>object</cite></p>
<blockquote>
<div><p>object to be brined for pickling</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>wrapped</strong> : <cite>object</cite></p>
<blockquote class="last">
<div><p>as defined by the <cite>value</cite> parameter</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="brine.unbrine">
<tt class="descclassname">brine.</tt><tt class="descname">unbrine</tt><big>(</big><em>value</em>, <em>with_globals=None</em><big>)</big><a class="reference internal" href="../_modules/brine/#unbrine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.unbrine" title="Permalink to this definition">¶</a></dt>
<dd><p>Unwrap a <cite>value</cite> previously wrapped with the <cite>brine</cite>
function. Behavior by type of <cite>value</cite> is as follows:</p>
<ul class="simple">
<li><cite>BrinePartial</cite> unwraps to a <cite>partial</cite></li>
<li><cite>BrineMethod</cite> unwraps to a <cite>instancemethod</cite></li>
<li><cite>BrineFunction</cite> unwraps to a <cite>function</cite></li>
<li><cite>list</cite> and <cite>tuple</cite> are duplicated and contents unbrined</li>
<li><cite>dict</cite> is duplicated and its values are unbrined</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>value</strong> : <cite>object</cite></p>
<blockquote>
<div><p>value to be unbrined</p>
</div></blockquote>
<p><strong>with_globals</strong> : <cite>dict</cite> or <cite>None</cite></p>
<blockquote>
<div><p>globals dictionary to use when recreating functions. <cite>None</cite> is
the same as <cite>globals()</cite></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>unwrapped</strong> : <cite>object</cite></p>
<blockquote class="last">
<div><p>as defined by the type of <cite>value</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="wrapper-classes">
<h2>Wrapper Classes<a class="headerlink" href="#wrapper-classes" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="brine.BrinedObject">
<em class="property">class </em><tt class="descclassname">brine.</tt><tt class="descname">BrinedObject</tt><big>(</big><em>value</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedObject"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedObject" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract base class for brine wrappers. Defines the interface
required for brine.</p>
<ul class="simple">
<li>When instantiated, should accept a <cite>value</cite> to wrap</li>
<li>The <cite>get</cite> method should return a new copy of the wrapped <cite>value</cite></li>
<li>Must define the <cite>__getstate__</cite> and <cite>__setstate__</cite> methods for
<cite>pickle</cite> support.</li>
</ul>
<dl class="method">
<dt id="brine.BrinedObject.__init__">
<tt class="descname">__init__</tt><big>(</big><em>value</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedObject.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedObject.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrap <cite>value</cite> so that it may be pickled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>value</strong> : <cite>object</cite></p>
<blockquote class="last">
<div><p>the instance needing to be wrapped for pickling</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="brine.BrinedObject.__getstate__">
<tt class="descname">__getstate__</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedObject.__getstate__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedObject.__getstate__" title="Permalink to this definition">¶</a></dt>
<dd><p>Special method used by a <cite>pickle.Pickler</cite> to serialize an instance
of this class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> : <cite>tuple</cite></p>
<blockquote class="last">
<div><p>information to provide to the pickle API. Should be the
same as what is expected in the <cite>__setstate__</cite> method</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="brine.BrinedObject.__setstate__">
<tt class="descname">__setstate__</tt><big>(</big><em>data</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedObject.__setstate__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedObject.__setstate__" title="Permalink to this definition">¶</a></dt>
<dd><p>Special method used by a <cite>pickle.Unpickler</cite> to deserialize an
instance of this class. Should accept the same data returned
by the <cite>__getstate__</cite> method</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>data</strong> : <cite>tuple</cite></p>
<blockquote class="last">
<div><p>information provided by the pickle API to instantiate a
new copy</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="brine.BrinedObject.get">
<tt class="descname">get</tt><big>(</big><em>with_globals=None</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedObject.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedObject.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Recreate a copy of the initial brined value</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>with_globals</strong> : <cite>dict</cite> or <cite>None</cite></p>
<blockquote>
<div><p>The global namespace to be used when recreating the
value. If None will be presumed to be <cite>globals()</cite> :type
with_globals: <a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a> or <a class="reference external" href="http://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">None</span></tt></a></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>value</strong> : <cite>object</cite></p>
<blockquote class="last">
<div><p>A copy of the <cite>value</cite> originally passed to <cite>__init__</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="brine.BrinedFunction">
<em class="property">class </em><tt class="descclassname">brine.</tt><tt class="descname">BrinedFunction</tt><big>(</big><em>function</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedFunction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#brine.BrinedObject" title="brine.BrinedObject"><tt class="xref py py-class docutils literal"><span class="pre">brine.BrinedObject</span></tt></a></p>
<p>Wraps a function so that it may be pickled. For the most part
you&#8217;ll want to use the brine and unbrine functions from this
module rather than instantiating or accessing this class directly</p>
</dd></dl>

<dl class="class">
<dt id="brine.BrinedMethod">
<em class="property">class </em><tt class="descclassname">brine.</tt><tt class="descname">BrinedMethod</tt><big>(</big><em>boundmethod</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedMethod"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#brine.BrinedObject" title="brine.BrinedObject"><tt class="xref py py-class docutils literal"><span class="pre">brine.BrinedObject</span></tt></a></p>
<p>Wraps a bound method so that it can be pickled. By default pickle
refuses to operate on bound instance method object. This wrapper
will still require that the object instance supports pickling,
which in turn requires that the class be defined at the top level.
As with the <cite>BrineFunction</cite> class, it is better to use the <cite>brine</cite>
and <cite>unbrine</cite> functions from this module rather than to create an
instance of this class directly.</p>
</dd></dl>

<dl class="class">
<dt id="brine.BrinedPartial">
<em class="property">class </em><tt class="descclassname">brine.</tt><tt class="descname">BrinedPartial</tt><big>(</big><em>part</em><big>)</big><a class="reference internal" href="../_modules/brine/#BrinedPartial"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#brine.BrinedPartial" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#brine.BrinedObject" title="brine.BrinedObject"><tt class="xref py py-class docutils literal"><span class="pre">brine.BrinedObject</span></tt></a></p>
<p>Wrap a <tt class="xref py py-class docutils literal"><span class="pre">functools.partial</span></tt> instance that references a
function or method that is otherwise unsupported by pickle.</p>
</dd></dl>

</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://docs.python.org/2/library/pickle.html#module-pickle" title="(in Python v2.7)"><tt class="xref py py-mod docutils literal"><span class="pre">pickle</span></tt></a>, <a class="reference external" href="http://docs.python.org/2/library/functools.html#functools.partial" title="(in Python v2.7)"><tt class="xref py py-func docutils literal"><span class="pre">functools.partial()</span></tt></a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Module brine</a><ul>
<li><a class="reference internal" href="#functions">Functions</a></li>
<li><a class="reference internal" href="#wrapper-classes">Wrapper Classes</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../overview/"
                        title="previous chapter">Overview of python-brine</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../barrel/"
                        title="next chapter">Module brine.barrel</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/brine.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search/" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../np-modindex/" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../barrel/" title="Module brine.barrel"
             >next</a> |</li>
        <li class="right" >
          <a href="../overview/" title="Overview of python-brine"
             >previous</a> |</li>
        <li><a href="../">brine 0.9.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Christopher O&#39;Brien.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>